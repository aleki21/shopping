function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lE2P:function(t,e,r){"use strict";r.r(e);var i,c,n=r("tyNb"),o=r("fXoL"),a=r("tk/3"),s=r("LRne"),d=r("HDdC"),b=r("vkgz"),u=r("JIr8"),l=r("lJxs"),p=((i=function(){function t(e){_classCallCheck(this,t),this.http=e,this.productsUrl="api/products"}return _createClass(t,[{key:"getProducts",value:function(){return this.http.get(this.productsUrl).pipe(Object(b.a)((function(t){return console.log(JSON.stringify(t))})),Object(u.a)(this.handleError))}},{key:"getProduct",value:function(t){return 0===t?Object(s.a)(this.initializeProduct()):this.http.get("".concat(this.productsUrl,"/").concat(t)).pipe(Object(b.a)((function(t){return console.log("getProduct: "+JSON.stringify(t))})),Object(u.a)(this.handleError))}},{key:"createProduct",value:function(t){var e=new a.d({"Content-Type":"application/json"});return t.id=null,this.http.post(this.productsUrl,t,{headers:e}).pipe(Object(b.a)((function(t){return console.log("createProduct: "+JSON.stringify(t))})),Object(u.a)(this.handleError))}},{key:"deleteProduct",value:function(t){var e=new a.d({"Content-Type":"application/json"});return this.http.delete("".concat(this.productsUrl,"/").concat(t),{headers:e}).pipe(Object(b.a)((function(e){return console.log("deleteProduct: "+t)})),Object(u.a)(this.handleError))}},{key:"updateProduct",value:function(t){var e=new a.d({"Content-Type":"application/json"});return this.http.put("".concat(this.productsUrl,"/").concat(t.id),t,{headers:e}).pipe(Object(b.a)((function(){return console.log("updateProduct: "+t.id)})),Object(l.a)((function(){return t})),Object(u.a)(this.handleError))}},{key:"handleError",value:function(t){var e,r;return e=t.error instanceof ErrorEvent?"An error occurred: ".concat(t.error.message):"Backend returned code ".concat(t.status,": ").concat(t.body.error),console.error(t),r=e,new d.a((function(t){return t.error(r)}))}},{key:"initializeProduct",value:function(){return{id:0,productName:null,productCode:null,category:null,tags:[],releaseDate:null,price:null,description:null,starRating:null,imageUrl:null}}}]),t}()).\u0275fac=function(t){return new(t||i)(o.Tb(a.b))},i.\u0275prov=o.Ib({token:i,factory:i.\u0275fac,providedIn:"root"}),i),h=r("3Pt+"),f=r("ofXK"),g=((c=function(){function t(){_classCallCheck(this,t),this.rating=0,this.starWidth=0,this.ratingClicked=new o.n}return _createClass(t,[{key:"ngOnChanges",value:function(){this.starWidth=75*this.rating/5}},{key:"onClick",value:function(){this.ratingClicked.emit("The rating ".concat(this.rating," was clicked!"))}}]),t}()).\u0275fac=function(t){return new(t||c)},c.\u0275cmp=o.Gb({type:c,selectors:[["pm-star"]],inputs:{rating:"rating"},outputs:{ratingClicked:"ratingClicked"},features:[o.Ab],decls:7,vars:3,consts:[[1,"crop",3,"title","click"],[2,"width","75px"],[1,"fa","fa-star"]],template:function(t,e){1&t&&(o.Pb(0,"div",0),o.Xb("click",(function(){return e.onClick()})),o.Pb(1,"div",1),o.Nb(2,"span",2),o.Nb(3,"span",2),o.Nb(4,"span",2),o.Nb(5,"span",2),o.Nb(6,"span",2),o.Ob(),o.Ob()),2&t&&(o.mc("width",e.starWidth,"px"),o.dc("title",e.rating))},styles:[".crop[_ngcontent-%COMP%]{overflow:hidden}div[_ngcontent-%COMP%]{cursor:pointer}"]}),c);function v(t,e){if(1&t&&(o.Pb(0,"div",3),o.Pb(1,"div",11),o.Pb(2,"h4"),o.oc(3),o.Ob(),o.Ob(),o.Ob()),2&t){var r=o.Zb();o.Cb(3),o.qc("Filtered by: ",r.listFilter,"")}}function P(t,e){if(1&t&&o.Nb(0,"img",19),2&t){var r=o.Zb().$implicit,i=o.Zb(2);o.mc("width",i.imageWidth,"px")("margin",i.imageMargin,"px"),o.dc("src",r.imageUrl,o.kc)("title",r.productName)}}var O=function(t){return[t]},m=function(t,e){return{filterBy:t,showImage:e}},C=function(t){return[t,"edit"]};function y(t,e){if(1&t&&(o.Pb(0,"tr"),o.Pb(1,"td"),o.nc(2,P,1,6,"img",15),o.Ob(),o.Pb(3,"td"),o.Pb(4,"a",16),o.oc(5),o.Ob(),o.Ob(),o.Pb(6,"td"),o.oc(7),o.Ob(),o.Pb(8,"td"),o.oc(9),o.Ob(),o.Pb(10,"td"),o.oc(11),o.ac(12,"currency"),o.Ob(),o.Pb(13,"td"),o.Nb(14,"pm-star",17),o.Ob(),o.Pb(15,"td"),o.Pb(16,"button",18),o.oc(17," Buy "),o.Ob(),o.Ob(),o.Ob()),2&t){var r=e.$implicit,i=o.Zb(2);o.Cb(2),o.dc("ngIf",i.showImage&&r.imageUrl),o.Cb(2),o.dc("routerLink",o.fc(14,O,r.id))("queryParams",o.gc(16,m,i.listFilter,i.showImage)),o.Cb(1),o.qc(" ",r.productName," "),o.Cb(2),o.pc(r.produtCode),o.Cb(2),o.pc(r.releaseDate),o.Cb(2),o.pc(o.cc(12,9,r.price,"USD","symbol","1.2-2")),o.Cb(3),o.dc("rating",r.starRating),o.Cb(2),o.dc("routerLink",o.fc(19,C,r.id))}}function k(t,e){if(1&t){var r=o.Qb();o.Pb(0,"table",12),o.Pb(1,"thead"),o.Pb(2,"tr"),o.Pb(3,"th"),o.Pb(4,"button",13),o.Xb("click",(function(){return o.jc(r),o.Zb().toggleImage()})),o.oc(5),o.Ob(),o.Ob(),o.Pb(6,"th"),o.oc(7,"Product"),o.Ob(),o.Pb(8,"th"),o.oc(9,"Code"),o.Ob(),o.Pb(10,"th"),o.oc(11,"Available"),o.Ob(),o.Pb(12,"th"),o.oc(13,"Price"),o.Ob(),o.Pb(14,"th"),o.oc(15,"5 Star Rating"),o.Ob(),o.Nb(16,"th"),o.Ob(),o.Ob(),o.Pb(17,"tbody"),o.nc(18,y,18,21,"tr",14),o.Ob(),o.Ob()}if(2&t){var i=o.Zb();o.Cb(5),o.qc(" ",i.showImage?"Hide":"Show"," Image "),o.Cb(13),o.dc("ngForOf",i.filteredProducts)}}function w(t,e){if(1&t&&(o.Pb(0,"div",20),o.oc(1),o.Ob()),2&t){var r=o.Zb();o.Cb(1),o.qc(" Error: ",r.errorMessage,"\n")}}var I,N=((I=function(){function t(e,r){_classCallCheck(this,t),this.productService=e,this.route=r,this.pageTitle="Product List",this.imageWidth=50,this.imageMargin=2,this.showImage=!1,this.errorMessage="",this._listFilter="",this.filteredProducts=[],this.products=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.listFilter=this.route.snapshot.queryParamMap.get("filterBy")||"",this.showImage="true"===this.route.snapshot.queryParamMap.get("showImage"),this.productService.getProducts().subscribe({next:function(e){t.products=e,t.filteredProducts=t.performFilter(t.listFilter)},error:function(e){return t.errorMessage=e}})}},{key:"performFilter",value:function(t){return t=t.toLocaleLowerCase(),this.products.filter((function(e){return-1!==e.productName.toLocaleLowerCase().indexOf(t)}))}},{key:"toggleImage",value:function(){this.showImage=!this.showImage}},{key:"listFilter",get:function(){return this._listFilter},set:function(t){this._listFilter=t,this.filteredProducts=this.listFilter?this.performFilter(this.listFilter):this.products}}]),t}()).\u0275fac=function(t){return new(t||I)(o.Mb(p),o.Mb(n.a))},I.\u0275cmp=o.Gb({type:I,selectors:[["ng-component"]],decls:13,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],["type","text",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"table-responsive"],["class","table mb-0",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"col-md-6"],[1,"table","mb-0"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[4,"ngFor","ngForOf"],[3,"src","title","width","margin",4,"ngIf"],[3,"routerLink","queryParams"],[3,"rating"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[3,"src","title"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(o.Pb(0,"div",0),o.Pb(1,"div",1),o.oc(2),o.Ob(),o.Pb(3,"div",2),o.Pb(4,"div",3),o.Pb(5,"div",4),o.oc(6,"Filter by:"),o.Ob(),o.Pb(7,"div",5),o.Pb(8,"input",6),o.Xb("ngModelChange",(function(t){return e.listFilter=t})),o.Ob(),o.Ob(),o.Ob(),o.nc(9,v,4,1,"div",7),o.Pb(10,"div",8),o.nc(11,k,19,2,"table",9),o.Ob(),o.Ob(),o.Ob(),o.nc(12,w,2,1,"div",10)),2&t&&(o.Cb(2),o.qc(" ",e.pageTitle," "),o.Cb(6),o.dc("ngModel",e.listFilter),o.Cb(1),o.dc("ngIf",e.listFilter),o.Cb(2),o.dc("ngIf",e.products&&e.products.length),o.Cb(1),o.dc("ngIf",e.errorMessage))},directives:[h.a,h.c,h.f,f.k,f.j,n.i,g,n.g],pipes:[f.c],styles:["thead[_ngcontent-%COMP%]{color:#337ab7}"]}),I);function M(t,e){if(1&t&&(o.Pb(0,"div",12),o.Nb(1,"img",16),o.Ob()),2&t){var r=o.Zb(2);o.Cb(1),o.mc("height",150,"px")("margin",2,"px"),o.dc("src",r.product.imageUrl,o.kc)("title",r.product.productName)}}var j=function(){return["/products"]},_=function(){return["Product Edit"]};function F(t,e){if(1&t&&(o.Pb(0,"div",4),o.Pb(1,"div",5),o.Pb(2,"div",6),o.Pb(3,"div",5),o.Pb(4,"div",7),o.oc(5,"Name:"),o.Ob(),o.Pb(6,"div",8),o.oc(7),o.Ob(),o.Ob(),o.Pb(8,"div",5),o.Pb(9,"div",7),o.oc(10,"Code:"),o.Ob(),o.Pb(11,"div",8),o.oc(12),o.Ob(),o.Ob(),o.Pb(13,"div",5),o.Pb(14,"div",7),o.oc(15,"Description:"),o.Ob(),o.Pb(16,"div",8),o.oc(17),o.Ob(),o.Ob(),o.Pb(18,"div",5),o.Pb(19,"div",7),o.oc(20,"Availability:"),o.Ob(),o.Pb(21,"div",8),o.oc(22),o.Ob(),o.Ob(),o.Pb(23,"div",5),o.Pb(24,"div",7),o.oc(25,"Price:"),o.Ob(),o.Pb(26,"div",8),o.oc(27),o.ac(28,"currency"),o.Ob(),o.Ob(),o.Pb(29,"div",5),o.Pb(30,"div",7),o.oc(31,"5 Star Rating:"),o.Ob(),o.Pb(32,"div",8),o.Nb(33,"pm-star",9),o.Ob(),o.Ob(),o.Pb(34,"div",5),o.Pb(35,"div",7),o.oc(36,"Category:"),o.Ob(),o.Pb(37,"div",8),o.oc(38),o.Ob(),o.Ob(),o.Pb(39,"div",5),o.Pb(40,"div",7),o.oc(41,"Tags:"),o.Ob(),o.Pb(42,"div",8),o.oc(43),o.Ob(),o.Ob(),o.Ob(),o.nc(44,M,2,6,"div",10),o.Ob(),o.Pb(45,"div",11),o.Pb(46,"div",12),o.Pb(47,"button",13),o.Nb(48,"i",14),o.oc(49," Back "),o.Ob(),o.Pb(50,"button",15),o.oc(51," Buy "),o.Ob(),o.Ob(),o.Ob(),o.Ob()),2&t){var r=o.Zb();o.Cb(7),o.pc(r.product.productName),o.Cb(5),o.pc(r.product.productCode),o.Cb(5),o.pc(r.product.description),o.Cb(5),o.pc(r.product.releaseDate),o.Cb(5),o.pc(o.bc(28,11,r.product.price,"USD","symbol")),o.Cb(6),o.dc("rating",r.product.starRating),o.Cb(5),o.pc(r.product.category),o.Cb(5),o.pc(r.product.tags),o.Cb(1),o.dc("ngIf",r.product.imageUrl),o.Cb(3),o.dc("routerLink",o.ec(15,j)),o.Cb(3),o.dc("routerLink",o.ec(16,_))}}function L(t,e){if(1&t&&(o.Pb(0,"div",17),o.oc(1),o.Ob()),2&t){var r=o.Zb();o.Cb(1),o.qc("",r.errorMessage,"\n")}}var T,U,q=((U=function(){function t(e){_classCallCheck(this,t),this.route=e,this.pageTitle="Product Detail"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this.route.snapshot.data.resolvedData;this.errorMessage=t.error,this.onProductRetrieved(t.product),this.buyMessage="product has been purchased"}},{key:"onProductRetrieved",value:function(t){this.product=t,this.pageTitle=this.product?"Product Detail: ".concat(this.product.productName):"No product found"}}]),t}()).\u0275fac=function(t){return new(t||U)(o.Mb(n.a))},U.\u0275cmp=o.Gb({type:U,selectors:[["ng-component"]],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"row"],[1,"col-md-8"],[1,"col-md-3"],[1,"col-md-6"],[3,"rating"],["class","col-md-4",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-4"],["queryParamsHandling","preserve",1,"btn","btn-outline-secondary","mr-3",2,"width","80px",3,"routerLink"],[1,"fa","fa-chevron-left"],[1,"btn","btn-outline-primary",2,"width","80px",3,"routerLink"],[1,"center-block","img-responsive",3,"src","title"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(o.Pb(0,"div",0),o.Pb(1,"div",1),o.oc(2),o.Ob(),o.nc(3,F,52,17,"div",2),o.Ob(),o.nc(4,L,2,1,"div",3)),2&t&&(o.Cb(2),o.qc(" ",e.pageTitle," "),o.Cb(1),o.dc("ngIf",e.product),o.Cb(1),o.dc("ngIf",e.errorMessage))},directives:[f.k,g,n.g],pipes:[f.c],styles:[""]}),U),x=((T=function(){function t(e){_classCallCheck(this,t),this.productService=e}return _createClass(t,[{key:"resolve",value:function(t,e){var r=t.paramMap.get("id");if(isNaN(+r)){var i="Product id was not a number: ".concat(r);return console.error(i),Object(s.a)({product:null,error:i})}return this.productService.getProduct(+r).pipe(Object(l.a)((function(t){return{product:t}})),Object(u.a)((function(t){var e="Retrieval error: ".concat(t);return console.error(e),Object(s.a)({product:null,error:e})})))}}]),t}()).\u0275fac=function(t){return new(t||T)(o.Tb(p))},T.\u0275prov=o.Ib({token:T,factory:T.\u0275fac,providedIn:"root"}),T),D=r("PCNd");r.d(e,"ProductModule",(function(){return S}));var E,S=((E=function t(){_classCallCheck(this,t)}).\u0275mod=o.Kb({type:E}),E.\u0275inj=o.Jb({factory:function(t){return new(t||E)},imports:[[D.a,n.j.forChild([{path:"",component:N},{path:":id",component:q,resolve:{resolvedData:x}},{path:":id/edit",resolve:{resolvedData:x},children:[{path:"",redirectTo:"info",pathMatch:"full"}]}])]]}),E)}}]);