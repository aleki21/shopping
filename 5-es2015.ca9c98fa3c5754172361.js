(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lE2P:function(t,r,e){"use strict";e.r(r);var i=e("tyNb"),c=e("fXoL"),o=e("tk/3"),n=e("LRne"),s=e("HDdC"),d=e("vkgz"),a=e("JIr8"),b=e("lJxs");let l=(()=>{class t{constructor(t){this.http=t,this.productsUrl="api/products"}getProducts(){return this.http.get(this.productsUrl).pipe(Object(d.a)(t=>console.log(JSON.stringify(t))),Object(a.a)(this.handleError))}getProduct(t){return 0===t?Object(n.a)(this.initializeProduct()):this.http.get(`${this.productsUrl}/${t}`).pipe(Object(d.a)(t=>console.log("getProduct: "+JSON.stringify(t))),Object(a.a)(this.handleError))}createProduct(t){const r=new o.d({"Content-Type":"application/json"});return t.id=null,this.http.post(this.productsUrl,t,{headers:r}).pipe(Object(d.a)(t=>console.log("createProduct: "+JSON.stringify(t))),Object(a.a)(this.handleError))}deleteProduct(t){const r=new o.d({"Content-Type":"application/json"});return this.http.delete(`${this.productsUrl}/${t}`,{headers:r}).pipe(Object(d.a)(r=>console.log("deleteProduct: "+t)),Object(a.a)(this.handleError))}updateProduct(t){const r=new o.d({"Content-Type":"application/json"});return this.http.put(`${this.productsUrl}/${t.id}`,t,{headers:r}).pipe(Object(d.a)(()=>console.log("updateProduct: "+t.id)),Object(b.a)(()=>t),Object(a.a)(this.handleError))}handleError(t){let r;return r=t.error instanceof ErrorEvent?`An error occurred: ${t.error.message}`:`Backend returned code ${t.status}: ${t.body.error}`,console.error(t),e=r,new s.a(t=>t.error(e));var e}initializeProduct(){return{id:0,productName:null,productCode:null,category:null,tags:[],releaseDate:null,price:null,description:null,starRating:null,imageUrl:null}}}return t.\u0275fac=function(r){return new(r||t)(c.Tb(o.b))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=e("3Pt+"),p=e("ofXK");let h=(()=>{class t{constructor(){this.rating=0,this.starWidth=0,this.ratingClicked=new c.n}ngOnChanges(){this.starWidth=75*this.rating/5}onClick(){this.ratingClicked.emit(`The rating ${this.rating} was clicked!`)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=c.Gb({type:t,selectors:[["pm-star"]],inputs:{rating:"rating"},outputs:{ratingClicked:"ratingClicked"},features:[c.Ab],decls:7,vars:3,consts:[[1,"crop",3,"title","click"],[2,"width","75px"],[1,"fa","fa-star"]],template:function(t,r){1&t&&(c.Pb(0,"div",0),c.Xb("click",(function(){return r.onClick()})),c.Pb(1,"div",1),c.Nb(2,"span",2),c.Nb(3,"span",2),c.Nb(4,"span",2),c.Nb(5,"span",2),c.Nb(6,"span",2),c.Ob(),c.Ob()),2&t&&(c.mc("width",r.starWidth,"px"),c.dc("title",r.rating))},styles:[".crop[_ngcontent-%COMP%]{overflow:hidden}div[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function g(t,r){if(1&t&&(c.Pb(0,"div",3),c.Pb(1,"div",11),c.Pb(2,"h4"),c.oc(3),c.Ob(),c.Ob(),c.Ob()),2&t){const t=c.Zb();c.Cb(3),c.qc("Filtered by: ",t.listFilter,"")}}function P(t,r){if(1&t&&c.Nb(0,"img",19),2&t){const t=c.Zb().$implicit,r=c.Zb(2);c.mc("width",r.imageWidth,"px")("margin",r.imageMargin,"px"),c.dc("src",t.imageUrl,c.kc)("title",t.productName)}}const O=function(t){return[t]},f=function(t,r){return{filterBy:t,showImage:r}},m=function(t){return[t,"edit"]};function v(t,r){if(1&t&&(c.Pb(0,"tr"),c.Pb(1,"td"),c.nc(2,P,1,6,"img",15),c.Ob(),c.Pb(3,"td"),c.Pb(4,"a",16),c.oc(5),c.Ob(),c.Ob(),c.Pb(6,"td"),c.oc(7),c.Ob(),c.Pb(8,"td"),c.oc(9),c.Ob(),c.Pb(10,"td"),c.oc(11),c.ac(12,"currency"),c.Ob(),c.Pb(13,"td"),c.Nb(14,"pm-star",17),c.Ob(),c.Pb(15,"td"),c.Pb(16,"button",18),c.oc(17," Buy "),c.Ob(),c.Ob(),c.Ob()),2&t){const t=r.$implicit,e=c.Zb(2);c.Cb(2),c.dc("ngIf",e.showImage&&t.imageUrl),c.Cb(2),c.dc("routerLink",c.fc(14,O,t.id))("queryParams",c.gc(16,f,e.listFilter,e.showImage)),c.Cb(1),c.qc(" ",t.productName," "),c.Cb(2),c.pc(t.produtCode),c.Cb(2),c.pc(t.releaseDate),c.Cb(2),c.pc(c.cc(12,9,t.price,"USD","symbol","1.2-2")),c.Cb(3),c.dc("rating",t.starRating),c.Cb(2),c.dc("routerLink",c.fc(19,m,t.id))}}function C(t,r){if(1&t){const t=c.Qb();c.Pb(0,"table",12),c.Pb(1,"thead"),c.Pb(2,"tr"),c.Pb(3,"th"),c.Pb(4,"button",13),c.Xb("click",(function(){return c.jc(t),c.Zb().toggleImage()})),c.oc(5),c.Ob(),c.Ob(),c.Pb(6,"th"),c.oc(7,"Product"),c.Ob(),c.Pb(8,"th"),c.oc(9,"Code"),c.Ob(),c.Pb(10,"th"),c.oc(11,"Available"),c.Ob(),c.Pb(12,"th"),c.oc(13,"Price"),c.Ob(),c.Pb(14,"th"),c.oc(15,"5 Star Rating"),c.Ob(),c.Nb(16,"th"),c.Ob(),c.Ob(),c.Pb(17,"tbody"),c.nc(18,v,18,21,"tr",14),c.Ob(),c.Ob()}if(2&t){const t=c.Zb();c.Cb(5),c.qc(" ",t.showImage?"Hide":"Show"," Image "),c.Cb(13),c.dc("ngForOf",t.filteredProducts)}}function y(t,r){if(1&t&&(c.Pb(0,"div",20),c.oc(1),c.Ob()),2&t){const t=c.Zb();c.Cb(1),c.qc(" Error: ",t.errorMessage,"\n")}}let w=(()=>{class t{constructor(t,r){this.productService=t,this.route=r,this.pageTitle="Product List",this.imageWidth=50,this.imageMargin=2,this.showImage=!1,this.errorMessage="",this._listFilter="",this.filteredProducts=[],this.products=[]}get listFilter(){return this._listFilter}set listFilter(t){this._listFilter=t,this.filteredProducts=this.listFilter?this.performFilter(this.listFilter):this.products}ngOnInit(){this.listFilter=this.route.snapshot.queryParamMap.get("filterBy")||"",this.showImage="true"===this.route.snapshot.queryParamMap.get("showImage"),this.productService.getProducts().subscribe({next:t=>{this.products=t,this.filteredProducts=this.performFilter(this.listFilter)},error:t=>this.errorMessage=t})}performFilter(t){return t=t.toLocaleLowerCase(),this.products.filter(r=>-1!==r.productName.toLocaleLowerCase().indexOf(t))}toggleImage(){this.showImage=!this.showImage}}return t.\u0275fac=function(r){return new(r||t)(c.Mb(l),c.Mb(i.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["ng-component"]],decls:13,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],["type","text",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"table-responsive"],["class","table mb-0",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"col-md-6"],[1,"table","mb-0"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[4,"ngFor","ngForOf"],[3,"src","title","width","margin",4,"ngIf"],[3,"routerLink","queryParams"],[3,"rating"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[3,"src","title"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(c.Pb(0,"div",0),c.Pb(1,"div",1),c.oc(2),c.Ob(),c.Pb(3,"div",2),c.Pb(4,"div",3),c.Pb(5,"div",4),c.oc(6,"Filter by:"),c.Ob(),c.Pb(7,"div",5),c.Pb(8,"input",6),c.Xb("ngModelChange",(function(t){return r.listFilter=t})),c.Ob(),c.Ob(),c.Ob(),c.nc(9,g,4,1,"div",7),c.Pb(10,"div",8),c.nc(11,C,19,2,"table",9),c.Ob(),c.Ob(),c.Ob(),c.nc(12,y,2,1,"div",10)),2&t&&(c.Cb(2),c.qc(" ",r.pageTitle," "),c.Cb(6),c.dc("ngModel",r.listFilter),c.Cb(1),c.dc("ngIf",r.listFilter),c.Cb(2),c.dc("ngIf",r.products&&r.products.length),c.Cb(1),c.dc("ngIf",r.errorMessage))},directives:[u.a,u.c,u.f,p.k,p.j,i.i,h,i.g],pipes:[p.c],styles:["thead[_ngcontent-%COMP%]{color:#337ab7}"]}),t})();function I(t,r){if(1&t&&(c.Pb(0,"div",12),c.Nb(1,"img",16),c.Ob()),2&t){const t=c.Zb(2);c.Cb(1),c.mc("height",150,"px")("margin",2,"px"),c.dc("src",t.product.imageUrl,c.kc)("title",t.product.productName)}}const k=function(){return["/products"]},N=function(){return["Product Edit"]};function M(t,r){if(1&t&&(c.Pb(0,"div",4),c.Pb(1,"div",5),c.Pb(2,"div",6),c.Pb(3,"div",5),c.Pb(4,"div",7),c.oc(5,"Name:"),c.Ob(),c.Pb(6,"div",8),c.oc(7),c.Ob(),c.Ob(),c.Pb(8,"div",5),c.Pb(9,"div",7),c.oc(10,"Code:"),c.Ob(),c.Pb(11,"div",8),c.oc(12),c.Ob(),c.Ob(),c.Pb(13,"div",5),c.Pb(14,"div",7),c.oc(15,"Description:"),c.Ob(),c.Pb(16,"div",8),c.oc(17),c.Ob(),c.Ob(),c.Pb(18,"div",5),c.Pb(19,"div",7),c.oc(20,"Availability:"),c.Ob(),c.Pb(21,"div",8),c.oc(22),c.Ob(),c.Ob(),c.Pb(23,"div",5),c.Pb(24,"div",7),c.oc(25,"Price:"),c.Ob(),c.Pb(26,"div",8),c.oc(27),c.ac(28,"currency"),c.Ob(),c.Ob(),c.Pb(29,"div",5),c.Pb(30,"div",7),c.oc(31,"5 Star Rating:"),c.Ob(),c.Pb(32,"div",8),c.Nb(33,"pm-star",9),c.Ob(),c.Ob(),c.Pb(34,"div",5),c.Pb(35,"div",7),c.oc(36,"Category:"),c.Ob(),c.Pb(37,"div",8),c.oc(38),c.Ob(),c.Ob(),c.Pb(39,"div",5),c.Pb(40,"div",7),c.oc(41,"Tags:"),c.Ob(),c.Pb(42,"div",8),c.oc(43),c.Ob(),c.Ob(),c.Ob(),c.nc(44,I,2,6,"div",10),c.Ob(),c.Pb(45,"div",11),c.Pb(46,"div",12),c.Pb(47,"button",13),c.Nb(48,"i",14),c.oc(49," Back "),c.Ob(),c.Pb(50,"button",15),c.oc(51," Buy "),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t){const t=c.Zb();c.Cb(7),c.pc(t.product.productName),c.Cb(5),c.pc(t.product.productCode),c.Cb(5),c.pc(t.product.description),c.Cb(5),c.pc(t.product.releaseDate),c.Cb(5),c.pc(c.bc(28,11,t.product.price,"USD","symbol")),c.Cb(6),c.dc("rating",t.product.starRating),c.Cb(5),c.pc(t.product.category),c.Cb(5),c.pc(t.product.tags),c.Cb(1),c.dc("ngIf",t.product.imageUrl),c.Cb(3),c.dc("routerLink",c.ec(15,k)),c.Cb(3),c.dc("routerLink",c.ec(16,N))}}function j(t,r){if(1&t&&(c.Pb(0,"div",17),c.oc(1),c.Ob()),2&t){const t=c.Zb();c.Cb(1),c.qc("",t.errorMessage,"\n")}}let F=(()=>{class t{constructor(t){this.route=t,this.pageTitle="Product Detail"}ngOnInit(){const t=this.route.snapshot.data.resolvedData;this.errorMessage=t.error,this.onProductRetrieved(t.product),this.buyMessage="product has been purchased"}onProductRetrieved(t){this.product=t,this.pageTitle=this.product?`Product Detail: ${this.product.productName}`:"No product found"}}return t.\u0275fac=function(r){return new(r||t)(c.Mb(i.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["ng-component"]],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"row"],[1,"col-md-8"],[1,"col-md-3"],[1,"col-md-6"],[3,"rating"],["class","col-md-4",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-4"],["queryParamsHandling","preserve",1,"btn","btn-outline-secondary","mr-3",2,"width","80px",3,"routerLink"],[1,"fa","fa-chevron-left"],[1,"btn","btn-outline-primary",2,"width","80px",3,"routerLink"],[1,"center-block","img-responsive",3,"src","title"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(c.Pb(0,"div",0),c.Pb(1,"div",1),c.oc(2),c.Ob(),c.nc(3,M,52,17,"div",2),c.Ob(),c.nc(4,j,2,1,"div",3)),2&t&&(c.Cb(2),c.qc(" ",r.pageTitle," "),c.Cb(1),c.dc("ngIf",r.product),c.Cb(1),c.dc("ngIf",r.errorMessage))},directives:[p.k,h,i.g],pipes:[p.c],styles:[""]}),t})(),L=(()=>{class t{constructor(t){this.productService=t}resolve(t,r){const e=t.paramMap.get("id");if(isNaN(+e)){const t=`Product id was not a number: ${e}`;return console.error(t),Object(n.a)({product:null,error:t})}return this.productService.getProduct(+e).pipe(Object(b.a)(t=>({product:t})),Object(a.a)(t=>{const r=`Retrieval error: ${t}`;return console.error(r),Object(n.a)({product:null,error:r})}))}}return t.\u0275fac=function(r){return new(r||t)(c.Tb(l))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var $=e("PCNd");e.d(r,"ProductModule",(function(){return T}));let T=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(r){return new(r||t)},imports:[[$.a,i.j.forChild([{path:"",component:w},{path:":id",component:F,resolve:{resolvedData:L}},{path:":id/edit",resolve:{resolvedData:L},children:[{path:"",redirectTo:"info",pathMatch:"full"}]}])]]}),t})()}}]);